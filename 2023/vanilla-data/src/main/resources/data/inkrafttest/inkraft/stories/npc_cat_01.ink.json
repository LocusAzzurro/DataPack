{
	"inkVersion": 21,
	"root": [
		["#", "^npc_cat_01", "/#", "#", "^Arion 艾利恩", "/#", "#", "^修道院上层羽翼制作体验NPC", "/#", "#", "^title: common_functions", "/#", "#", "^author: qyl27", "/#", "\n", "ev", true, {
			"x()": "setAutoContinue",
			"exArgs": 1
		}, "pop", "/ev", "\n", "ev", 20, {
			"x()": "setAutoContinueSpeed",
			"exArgs": 1
		}, "pop", "/ev", "\n", "ev", "str", "^mission_flag_cat_01", "/str", {
			"x()": "getVariable",
			"exArgs": 1
		}, "/ev", {
			"VAR=": "mission_flag_cat_01",
			"re": true
		}, "\n", "ev", "str", "^mission_flag_cat_02", "/str", {
			"x()": "getVariable",
			"exArgs": 1
		}, "/ev", {
			"VAR=": "mission_flag_cat_02",
			"re": true
		}, "\n", [{
				"->": "start"
			},
			["done", {
				"#f": 5,
				"#n": "g-1"
			}], {
				"#f": 5,
				"#n": "g-0"
			}
		], null], "done", {
			"start": ["ev", {
					"VAR?": "mission_flag_cat_02"
				}, "/ev", [{
					"->": ".^.b",
					"c": true
				}, {
					"b": ["\n", {
						"->": "completed_start"
					}, {
						"->": "start.5"
					}, null]
				}],
				[{
					"->": ".^.b"
				}, {
					"b": ["\n", "ev", {
							"VAR?": "mission_flag_cat_01"
						}, "/ev", [{
							"->": ".^.b",
							"c": true
						}, {
							"b": ["\n", {
								"->": "crafting_start"
							}, {
								"->": ".^.^.^.6"
							}, null]
						}],
						[{
							"->": ".^.b"
						}, {
							"b": ["\n", {
								"->": "normal_start"
							}, {
								"->": ".^.^.^.6"
							}, null]
						}], "nop", "\n", {
							"->": "start.5"
						},
						null
					]
				}], "nop", "\n", {
					"#f": 1
				}
			],
			"normal_start": [
				["^[1/2] 艾利恩：你好，冒险者，想必你已经了解了传统的羽翼制作方式了吧？", "\n", "^[2/2] 艾利恩：让我来考考你怎么样？", "\n", ["ev", {
							"^->": "normal_start.0.4.$r1"
						}, {
							"temp=": "$r"
						}, "str", {
							"->": ".^.s"
						},
						[{
							"#n": "$r1"
						}], "/str", "/ev", {
							"*": ".^.^.c-0",
							"flg": 18
						}, {
							"s": ["^那就来吧！", {
								"->": "$r",
								"var": true
							}, null]
						}
					],
					["ev", {
							"^->": "normal_start.0.5.$r1"
						}, {
							"temp=": "$r"
						}, "str", {
							"->": ".^.s"
						},
						[{
							"#n": "$r1"
						}], "/str", "/ev", {
							"*": ".^.^.c-1",
							"flg": 18
						}, {
							"s": ["^我还没准备好。", {
								"->": "$r",
								"var": true
							}, null]
						}
					], {
						"c-0": ["ev", {
								"^->": "normal_start.0.c-0.$r2"
							}, "/ev", {
								"temp=": "$r"
							}, {
								"->": ".^.^.4.s"
							},
							[{
								"#n": "$r2"
							}], "\n", {
								"->": "quiz_start"
							}, {
								"#f": 5
							}
						],
						"c-1": ["ev", {
								"^->": "normal_start.0.c-1.$r2"
							}, "/ev", {
								"temp=": "$r"
							}, {
								"->": ".^.^.5.s"
							},
							[{
								"#n": "$r2"
							}], "\n", {
								"->": "quiz_not_prepared"
							}, {
								"#f": 5
							}
						]
					}
				], {
					"#f": 1
				}
			],
			"quiz_not_prepared": ["^[1/2] 艾利恩：哈哈，没关系，再到处转转了解一下吧。", "\n", "^[2/2] 艾利恩：准备好了之后可以随时来找我。", "\n", {
				"->": "ending"
			}, {
				"#f": 1
			}],
			"quiz_start": [{
				"->": ".^.question_1"
			}, {
				"question_1": [
					["^[1/3] 艾利恩：羽翼一般是用什么制作的？", "\n", ["ev", {
								"^->": "quiz_start.question_1.0.2.$r1"
							}, {
								"temp=": "$r"
							}, "str", {
								"->": ".^.s"
							},
							[{
								"#n": "$r1"
							}], "/str", "/ev", {
								"*": ".^.^.c-0",
								"flg": 18
							}, {
								"s": ["^羽毛，蜂蜜和木板。", {
									"->": "$r",
									"var": true
								}, null]
							}
						],
						["ev", {
								"^->": "quiz_start.question_1.0.3.$r1"
							}, {
								"temp=": "$r"
							}, "str", {
								"->": ".^.s"
							},
							[{
								"#n": "$r1"
							}], "/str", "/ev", {
								"*": ".^.^.c-1",
								"flg": 18
							}, {
								"s": ["^羽毛扎，蜂蜡和木板。", {
									"->": "$r",
									"var": true
								}, null]
							}
						],
						["ev", {
								"^->": "quiz_start.question_1.0.4.$r1"
							}, {
								"temp=": "$r"
							}, "str", {
								"->": ".^.s"
							},
							[{
								"#n": "$r1"
							}], "/str", "/ev", {
								"*": ".^.^.c-2",
								"flg": 18
							}, {
								"s": ["^羽毛扎，蜜脾和木板。", {
									"->": "$r",
									"var": true
								}, null]
							}
						], {
							"c-0": ["ev", {
									"^->": "quiz_start.question_1.0.c-0.$r2"
								}, "/ev", {
									"temp=": "$r"
								}, {
									"->": ".^.^.2.s"
								},
								[{
									"#n": "$r2"
								}], "\n", {
									"->": ".^.^.g-0"
								}, {
									"#f": 5
								}
							],
							"c-1": ["ev", {
									"^->": "quiz_start.question_1.0.c-1.$r2"
								}, "/ev", {
									"temp=": "$r"
								}, {
									"->": ".^.^.3.s"
								},
								[{
									"#n": "$r2"
								}], "\n", "ev", {
									"VAR?": "correct_answers"
								},
								1, "+", {
									"VAR=": "correct_answers",
									"re": true
								}, "/ev", {
									"->": ".^.^.g-0"
								}, {
									"#f": 5
								}
							],
							"c-2": ["ev", {
									"^->": "quiz_start.question_1.0.c-2.$r2"
								}, "/ev", {
									"temp=": "$r"
								}, {
									"->": ".^.^.4.s"
								},
								[{
									"#n": "$r2"
								}], "\n", {
									"->": ".^.^.g-0"
								}, {
									"#f": 5
								}
							],
							"g-0": [{
								"->": ".^.^.^.^.question_2"
							}, {
								"#f": 5
							}]
						}
					], {
						"#f": 1
					}
				],
				"question_2": [
					["^[2/3] 艾利恩：不同种类的羽翼用的材料一样吗？", "\n", ["ev", {
								"^->": "quiz_start.question_2.0.2.$r1"
							}, {
								"temp=": "$r"
							}, "str", {
								"->": ".^.s"
							},
							[{
								"#n": "$r1"
							}], "/str", "/ev", {
								"*": ".^.^.c-0",
								"flg": 18
							}, {
								"s": ["^结构大致相同，具体的材料略有不同。", {
									"->": "$r",
									"var": true
								}, null]
							}
						],
						["ev", {
								"^->": "quiz_start.question_2.0.3.$r1"
							}, {
								"temp=": "$r"
							}, "str", {
								"->": ".^.s"
							},
							[{
								"#n": "$r1"
							}], "/str", "/ev", {
								"*": ".^.^.c-1",
								"flg": 18
							}, {
								"s": ["^完全不同。", {
									"->": "$r",
									"var": true
								}, null]
							}
						], {
							"c-0": ["ev", {
									"^->": "quiz_start.question_2.0.c-0.$r2"
								}, "/ev", {
									"temp=": "$r"
								}, {
									"->": ".^.^.2.s"
								},
								[{
									"#n": "$r2"
								}], "\n", "ev", {
									"VAR?": "correct_answers"
								},
								1, "+", {
									"VAR=": "correct_answers",
									"re": true
								}, "/ev", {
									"->": ".^.^.g-0"
								}, {
									"#f": 5
								}
							],
							"c-1": ["ev", {
									"^->": "quiz_start.question_2.0.c-1.$r2"
								}, "/ev", {
									"temp=": "$r"
								}, {
									"->": ".^.^.3.s"
								},
								[{
									"#n": "$r2"
								}], "\n", {
									"->": ".^.^.g-0"
								}, {
									"#f": 5
								}
							],
							"g-0": [{
								"->": ".^.^.^.^.question_3"
							}, {
								"#f": 5
							}]
						}
					], {
						"#f": 1
					}
				],
				"question_3": [
					["^[3/3] 艾利恩：目前有几种不同材质的，用羽毛制作的羽翼？", "\n", ["ev", {
								"^->": "quiz_start.question_3.0.2.$r1"
							}, {
								"temp=": "$r"
							}, "str", {
								"->": ".^.s"
							},
							[{
								"#n": "$r1"
							}], "/str", "/ev", {
								"*": ".^.^.c-0",
								"flg": 18
							}, {
								"s": ["^2种", {
									"->": "$r",
									"var": true
								}, null]
							}
						],
						["ev", {
								"^->": "quiz_start.question_3.0.3.$r1"
							}, {
								"temp=": "$r"
							}, "str", {
								"->": ".^.s"
							},
							[{
								"#n": "$r1"
							}], "/str", "/ev", {
								"*": ".^.^.c-1",
								"flg": 18
							}, {
								"s": ["^3种", {
									"->": "$r",
									"var": true
								}, null]
							}
						],
						["ev", {
								"^->": "quiz_start.question_3.0.4.$r1"
							}, {
								"temp=": "$r"
							}, "str", {
								"->": ".^.s"
							},
							[{
								"#n": "$r1"
							}], "/str", "/ev", {
								"*": ".^.^.c-2",
								"flg": 18
							}, {
								"s": ["^4种", {
									"->": "$r",
									"var": true
								}, null]
							}
						], {
							"c-0": ["ev", {
									"^->": "quiz_start.question_3.0.c-0.$r2"
								}, "/ev", {
									"temp=": "$r"
								}, {
									"->": ".^.^.2.s"
								},
								[{
									"#n": "$r2"
								}], "\n", {
									"->": ".^.^.g-0"
								}, {
									"#f": 5
								}
							],
							"c-1": ["ev", {
									"^->": "quiz_start.question_3.0.c-1.$r2"
								}, "/ev", {
									"temp=": "$r"
								}, {
									"->": ".^.^.3.s"
								},
								[{
									"#n": "$r2"
								}], "\n", "ev", {
									"VAR?": "correct_answers"
								},
								1, "+", {
									"VAR=": "correct_answers",
									"re": true
								}, "/ev", {
									"->": ".^.^.g-0"
								}, {
									"#f": 5
								}
							],
							"c-2": ["ev", {
									"^->": "quiz_start.question_3.0.c-2.$r2"
								}, "/ev", {
									"temp=": "$r"
								}, {
									"->": ".^.^.4.s"
								},
								[{
									"#n": "$r2"
								}], "\n", {
									"->": ".^.^.g-0"
								}, {
									"#f": 5
								}
							],
							"g-0": [{
								"->": ".^.^.^.^.quiz_check"
							}, {
								"#f": 5
							}]
						}
					], {
						"#f": 1
					}
				],
				"quiz_check": ["ev", {
						"VAR?": "correct_answers"
					}, 3, ">=", "/ev", [{
						"->": ".^.b",
						"c": true
					}, {
						"b": ["\n", {
							"->": "quiz_passed"
						}, {
							"->": ".^.^.^.7"
						}, null]
					}],
					[{
						"->": ".^.b"
					}, {
						"b": ["\n", {
							"->": "quiz_not_passed"
						}, {
							"->": ".^.^.^.7"
						}, null]
					}], "nop", "\n", {
						"#f": 1
					}
				],
				"#f": 1
			}],
			"quiz_passed": ["^[1/3] 艾利恩：看起来你已经对羽翼的制作相当了解了。", "\n", "^[2/3] 艾利恩：不过这都是理论，现在让我看看你的手艺吧。", "\n", "^[3/3] 艾利恩：制作一副普通羽毛制成的羽翼交给我，我会用一副更好的羽翼和你交换。", "\n", "ev", "str", "^mission_flag_cat_01", "/str", true, {
				"x()": "putVariable",
				"exArgs": 2
			}, "pop", "/ev", "\n", {
				"->": "ending"
			}, {
				"#f": 1
			}],
			"quiz_not_passed": ["^[1/1] 艾利恩：还是有些地方不太对，再去多多了解之后再来找我吧。", "\n", {
				"->": "ending"
			}, {
				"#f": 1
			}],
			"crafting_start": [
				["ev", "str", "^{id:\"locusazzurro_icaruswings:feather_wings\",Count:1}", "/str", {
						"x()": "hasItemStack",
						"exArgs": 1
					}, "/ev", {
						"VAR=": "has_wings",
						"re": true
					}, "\n", "^[1/1] 艾利恩：我们又见面了，冒险者，你的羽翼制作完成了吗？", "\n", ["ev", {
							"^->": "crafting_start.0.10.$r1"
						}, {
							"temp=": "$r"
						}, "str", {
							"->": ".^.s"
						},
						[{
							"#n": "$r1"
						}], "/str", {
							"VAR?": "has_wings"
						}, "/ev", {
							"*": ".^.^.c-0",
							"flg": 19
						}, {
							"s": ["^做好了。", {
								"->": "$r",
								"var": true
							}, null]
						}
					],
					["ev", {
							"^->": "crafting_start.0.11.$r1"
						}, {
							"temp=": "$r"
						}, "str", {
							"->": ".^.s"
						},
						[{
							"#n": "$r1"
						}], "/str", "/ev", {
							"*": ".^.^.c-1",
							"flg": 18
						}, {
							"s": ["^还没做好。", {
								"->": "$r",
								"var": true
							}, null]
						}
					], {
						"c-0": ["ev", {
								"^->": "crafting_start.0.c-0.$r2"
							}, "/ev", {
								"temp=": "$r"
							}, {
								"->": ".^.^.10.s"
							},
							[{
								"#n": "$r2"
							}], "\n", {
								"->": "crafting_done"
							}, {
								"#f": 5
							}
						],
						"c-1": ["ev", {
								"^->": "crafting_start.0.c-1.$r2"
							}, "/ev", {
								"temp=": "$r"
							}, {
								"->": ".^.^.11.s"
							},
							[{
								"#n": "$r2"
							}], "\n", {
								"->": "crafting_not_done"
							}, {
								"#f": 5
							}
						]
					}
				], {
					"#f": 1
				}
			],
			"crafting_not_done": ["^[1/1] 艾利恩：这样啊，等你完成之后，请务必让我看看你的手艺。", "\n", {
				"->": "ending"
			}, {
				"#f": 1
			}],
			"crafting_done": ["^[1/1] 艾利恩：不错不错，这可真是做工精良，按照约定，给你一副我们特别制作的，赠予愿意了解我们的故事的冒险者们的彩色羽翼。", "\n", "ev", "str", "^{id:\"locusazzurro_icaruswings:feather_wings\",Count:1}", "/str", {
				"x()": "takeItemStack",
				"exArgs": 1
			}, "pop", "/ev", "\n", "ev", "str", "^{id:\"locusazzurro_icaruswings:colored_feather_wings\",Count:1}", "/str", {
				"x()": "giveItemStack",
				"exArgs": 1
			}, "pop", "/ev", "\n", "ev", "str", "^mission_flag_cat_02", "/str", true, {
				"x()": "putVariable",
				"exArgs": 2
			}, "pop", "/ev", "\n", {
				"->": "ending"
			}, {
				"#f": 1
			}],
			"completed_start": ["^[1/1] 艾利恩：你好啊，冒险者，在天空中翱翔的感觉如何？", "\n", {
				"->": "ending"
			}, {
				"#f": 1
			}],
			"ending": ["done", {
				"#f": 1
			}],
			"putVariable": [{
				"temp=": "value"
			}, {
				"temp=": "name"
			}, "ev", false, "/ev", "~ret", {
				"#f": 1
			}],
			"hideContinue": [{
				"temp=": "isHide"
			}, "ev", false, "/ev", "~ret", {
				"#f": 1
			}],
			"getVariable": [{
				"temp=": "name"
			}, "ev", false, "/ev", "~ret", {
				"#f": 1
			}],
			"global decl": ["ev", 0, {
				"VAR=": "correct_answers"
			}, false, {
				"VAR=": "mission_flag_cat_01"
			}, false, {
				"VAR=": "mission_flag_cat_02"
			}, false, {
				"VAR=": "has_wings"
			}, "/ev", "end", null],
			"#f": 1
		}
	],
	"listDefs": {}
}